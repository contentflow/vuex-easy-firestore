(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{166:function(t,s,a){"use strict";a.r(s);var e=a(0),n=Object(e.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),a("p",[t._v("Firebase is a peer dependency; It will use your existing version.")]),t._v(" "),t._m(2),t._v(" "),a("p",[t._v("It's super easy to set up and start using!")]),t._v(" "),t._m(3),t._v(" "),t._m(4),a("p",[t._v("Now your "),a("code",[t._v("userData")]),t._v(" module will automatically retrieve all docs from firestore and any mutations you make will be synced to Firestore! Please check the "),a("router-link",{attrs:{to:"./guide.html"}},[t._v("guide")]),t._v(" for basic information how to properly use the actions/mutations.")],1),t._v(" "),t._m(5),t._v(" "),t._m(6),t._v(" "),t._m(7),t._v(" "),a("p",[t._v("The first thing you need to do is open the connection to Firestore. You can do so by simply doing:")]),t._v(" "),t._m(8),t._m(9),t._v(" "),t._m(10),t._v(" "),t._m(11),t._v(" "),t._m(12),a("p",[t._v("With vuex-easy-firestore modules you should be using the Vuex "),a("router-link",{attrs:{to:"./guide.html"}},[t._v("actions")]),t._v(" that were set up for you, then Firestore will always be in sync!")],1),t._v(" "),t._m(13),t._v(" "),t._m(14),t._v(" "),t._m(15),t._m(16),t._v(" "),a("p",[t._v("Vuex-easy-firestore uses Firestore's "),a("a",{attrs:{href:"https://firebase.google.com/docs/firestore/query-data/listen",target:"_blank",rel:"noopener noreferrer"}},[t._v("onSnapshot"),a("OutboundLink")],1),t._v(" to retrieve the doc(s) from the server and has added logic to save those doc(s) in a vuex module. If you do not want to open an "),a("code",[t._v("onSnapshot")]),t._v(" listener you can also use "),a("router-link",{attrs:{to:"./guide.html#fetching-docs-with-different-filters"}},[t._v("fetch")]),t._v(" instead.")],1),t._v(" "),t._m(17),t._v(" "),t._m(18),t._v(" "),t._m(19),a("p",[t._v("This will close the connection using Firestore's "),a("a",{attrs:{href:"https://firebase.google.com/docs/firestore/query-data/listen#detach_a_listener",target:"_blank",rel:"noopener noreferrer"}},[t._v("unsubscribe function"),a("OutboundLink")],1),t._v(".")]),t._v(" "),t._m(20),t._v(" "),a("p",[t._v("You can also close the connection and completely clear out the module; removing all docs from vuex. (without deleting anything on the server, don't worry) In this case do:")]),t._v(" "),t._m(21)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"installation"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#installation","aria-hidden":"true"}},[this._v("#")]),this._v(" Installation")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("npm")]),this._v(" i --save vuex-easy-firestore firebase\n"),s("span",{attrs:{class:"token comment"}},[this._v("# or")]),this._v("\nyarn add vuex-easy-firestore firebase\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"setup"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#setup","aria-hidden":"true"}},[this._v("#")]),this._v(" Setup")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ol",[s("li",[this._v("Add 4 lines of code to your vuex-module")]),this._v(" "),s("li",[this._v("Import the vuex-module wrapped in vuex-easy-firestore plugin")]),this._v(" "),s("li",[this._v("dispatch "),s("code",[this._v("openDBChannel")]),this._v(" action")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("import")]),t._v(" createEasyFirestore "),a("span",{attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'vuex-easy-firestore'")]),t._v("\n\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" userDataModule "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  firestorePath"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'users/{userId}/data'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  firestoreRefType"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'collection'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// or 'doc'")]),t._v("\n  moduleName"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'userData'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  statePropName"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'docs'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// you can also add state/getters/mutations/actions")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// for other config like fillables see 'Extra features'")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// do the magic ðŸ§™ðŸ»â€â™‚ï¸")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("const")]),t._v(" easyFirestore "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("createEasyFirestore")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("userDataModule"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("logging"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// include as PLUGIN in your vuex store:")]),t._v("\nstore"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("// ... your store")]),t._v("\n  plugins"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),t._v("easyFirestore"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// open the DB channel")]),t._v("\nstore"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'userData/openDBChannel'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"dev-logging"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#dev-logging","aria-hidden":"true"}},[this._v("#")]),this._v(" Dev logging")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Passing "),s("code",[this._v("{logging: true}")]),this._v(" as second param will enable console.logging on each api call. This is recommended for debugging initially, but could be disabled on production.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"open-db-channel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#open-db-channel","aria-hidden":"true"}},[this._v("#")]),this._v(" Open DB channel")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'moduleName/openDBChannel'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"store-the-docs-in-vuex"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#store-the-docs-in-vuex","aria-hidden":"true"}},[this._v("#")]),this._v(" Store the docs in vuex")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("openDBChannel")]),this._v(" will retrieve the data/docs from Firestore and doesn't require any callback in particular; "),s("strong",[this._v("the results will automatically be added to your vuex module")]),this._v(" as per your configuration.")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("In the example below, Firestore docs will be saved in vuex module "),s("code",[this._v("userData/docs")]),this._v(". You can also leave statePropName empty to save the docs directly to the vuex module's state.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  moduleName"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'userData'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  statePropName"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'docs'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"example-with-user-id"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#example-with-user-id","aria-hidden":"true"}},[this._v("#")]),this._v(" Example with user ID:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("If your firestore path contains a user ID, you will need to wait for the user. After Firebase finds a user through "),s("code",[this._v("onAuthStateChanged")]),this._v(" you can dispatch "),s("code",[this._v("openDBChannel")]),this._v(" and it will automatically pickup the correct user ID.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// Be sure to initialise Firebase first")]),t._v("\nFirebase"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("auth")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("onAuthStateChanged")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("user"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token comment"}},[t._v("// user is logged in")]),t._v("\n    store"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'userData/openDBChannel'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("catch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("error"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"under-the-hood"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#under-the-hood","aria-hidden":"true"}},[this._v("#")]),this._v(" Under the hood")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"close-db-channel"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#close-db-channel","aria-hidden":"true"}},[this._v("#")]),this._v(" Close DB channel")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("In most cases you never need to close the connection to Firestore. But if you do want to close it (unsubscribe from Firestore's "),s("code",[this._v("onSnapshot")]),this._v(") you can do so like this:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("div",{staticClass:"language-js extra-class"},[s("pre",{pre:!0,attrs:{class:"language-js"}},[s("code",[s("span",{attrs:{class:"token function"}},[this._v("dispatch")]),s("span",{attrs:{class:"token punctuation"}},[this._v("(")]),s("span",{attrs:{class:"token string"}},[this._v("'moduleName/closeDBChannel'")]),s("span",{attrs:{class:"token punctuation"}},[this._v(")")]),this._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("Please note, "),s("code",[this._v("closeDBChannel")]),this._v(" "),s("strong",[this._v("will not clear out the vuex-module.")]),this._v(" This means that you can continue to insert/patch/delete docs and they will still be synced to the server. However, changes on the server side will not be reflected to the app anymore.")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token function"}},[t._v("dispatch")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'moduleName/closeDBChannel'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("clearModule"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("true")]),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])}],!1,null,null,null);n.options.__file="setup.md";s.default=n.exports}}]);