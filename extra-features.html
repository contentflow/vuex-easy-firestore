<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Extra features | Vuex Easy Firestore 🔥</title>
    <meta name="description" content="Easy coupling of firestore and vuex. 2-way sync with 0 boilerplate!">
    
    
    <link rel="preload" href="/vuex-easy-firestore/assets/css/styles.4727a7aa.css" as="style"><link rel="preload" href="/vuex-easy-firestore/assets/js/app.4727a7aa.js" as="script"><link rel="preload" href="/vuex-easy-firestore/assets/js/5.2340a0ed.js" as="script"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/3.23dce908.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/css/1.styles.d3602896.css"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/1.d3602896.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/css/2.styles.fe266861.css"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/2.fe266861.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/4.83168eea.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/6.00f63adb.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/7.72b46fbb.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/8.03074ee9.js"><link rel="prefetch" href="/vuex-easy-firestore/assets/js/9.c13f1c6c.js">
    <link rel="stylesheet" href="/vuex-easy-firestore/assets/css/1.styles.d3602896.css"><link rel="stylesheet" href="/vuex-easy-firestore/assets/css/2.styles.fe266861.css"><link rel="stylesheet" href="/vuex-easy-firestore/assets/css/styles.4727a7aa.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/vuex-easy-firestore/" class="home-link router-link-active"><!----> <span class="site-name">Vuex Easy Firestore 🔥</span></a> <div class="links" style="max-width:nullpx;"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="https://github.com/mesqueeb/vuex-easy-firestore/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/mesqueeb/vuex-easy-firestore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="https://github.com/mesqueeb/vuex-easy-firestore/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Changelog
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <a href="https://github.com/mesqueeb/vuex-easy-firestore" target="_blank" rel="noopener noreferrer" class="repo-link">
    Github
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/vuex-easy-firestore/setup.html" class="sidebar-link">Installation &amp; setup</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/setup.html#installation" class="sidebar-link">Installation</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/setup.html#setup" class="sidebar-link">Setup</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/setup.html#open-db-channel" class="sidebar-link">Open DB channel</a></li></ul></li><li><a href="/vuex-easy-firestore/guide.html" class="sidebar-link">Guide</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#basic-usage" class="sidebar-link">Basic usage</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#collection-mode" class="sidebar-link">'collection' mode</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#doc-mode" class="sidebar-link">'doc' mode</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#shortcut-set-path-doc" class="sidebar-link">Shortcut: set(path, doc)</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#multiple-modules-with-2-way-sync" class="sidebar-link">Multiple modules with 2-way sync</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#sync-directly-to-module-state" class="sidebar-link">Sync directly to module state</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#batch-updates-inserts-deletions" class="sidebar-link">Batch updates/inserts/deletions</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#fetching-docs-with-different-filters" class="sidebar-link">Fetching docs (with different filters)</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/guide.html#duplicating-docs" class="sidebar-link">Duplicating docs</a></li></ul></li><li><a href="/vuex-easy-firestore/extra-features.html" class="active sidebar-link">Extra features</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#filters" class="sidebar-link">Filters</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#variables-for-firestorepath-or-filters" class="sidebar-link">Variables for firestorePath or filters</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#fillables-and-guard" class="sidebar-link">Fillables and guard</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#hooks-before-insert-patch-delete" class="sidebar-link">Hooks before insert/patch/delete</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#hooks-after-changes-on-the-server" class="sidebar-link">Hooks after changes on the server</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#defaultvalues-set-after-server-retrieval" class="sidebar-link">defaultValues set after server retrieval</a></li><li class="sidebar-sub-header"><a href="/vuex-easy-firestore/extra-features.html#pass-firebase-dependency" class="sidebar-link">Pass Firebase dependency</a></li></ul></li><li><a href="/vuex-easy-firestore/config-example.html" class="sidebar-link">Config example</a></li><li><a href="/vuex-easy-firestore/feedback.html" class="sidebar-link">Feedback</a></li></ul> </div> <div class="page"> <div class="content"><h1 id="extra-features"><a href="#extra-features" aria-hidden="true" class="header-anchor">#</a> Extra features</h1> <h2 id="filters"><a href="#filters" aria-hidden="true" class="header-anchor">#</a> Filters</h2> <p>The filters set in <code>sync: {}</code> are applied before the DB Channel is openend. They are only available for syncing 'collections'.</p> <ul><li><em>where:</em> The same as firestore's <code>.where()</code></li> <li><em>orderBy:</em> The same as firestore's <code>.orderBy()</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// your other vuex-easy-fire config...</span>
  sync<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    where<span class="token punctuation">:</span> <span class="token punctuation">[</span> <span class="token comment">// an array of arrays</span>
      <span class="token punctuation">[</span><span class="token string">'certain_field'</span><span class="token punctuation">,</span> <span class="token string">'=='</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">]</span> <span class="token comment">// example</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    orderBy<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token string">'created_date'</span> <span class="token comment">// example</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>You can also use <code>'{userId}'</code> as third param for a where filter. Eg.:</p> <div class="language-js extra-class"><pre class="language-js"><code>where<span class="token punctuation">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">[</span><span class="token string">'created_by'</span><span class="token punctuation">,</span> <span class="token string">'=='</span><span class="token punctuation">,</span> <span class="token string">'{userId}'</span><span class="token punctuation">]</span>
<span class="token punctuation">]</span>
</code></pre></div><h2 id="variables-for-firestorepath-or-filters"><a href="#variables-for-firestorepath-or-filters" aria-hidden="true" class="header-anchor">#</a> Variables for firestorePath or filters</h2> <p>Besides <code>'{userId}'</code> in your <code>firestorePath</code> in the config or in where filters, you can also use <strong>any variable</strong> in the <code>firestorePath</code> or the <code>where</code> filter.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// your vuex module</span>
SpecificGroupUserModule<span class="token punctuation">:</span> <span class="token punctuation">{</span>
  moduleName<span class="token punctuation">:</span> <span class="token string">'groupUserData'</span><span class="token punctuation">,</span>
  firestorePath<span class="token punctuation">:</span> <span class="token string">'groups/{groupId}/users/{userId}'</span>
<span class="token punctuation">}</span>
<span class="token comment">// Just pass the groupId as a parameter to openDBChannel!</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'groupUserData/openDBChannel'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>groupId<span class="token punctuation">:</span> <span class="token string">'group-A'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p><strong>Use case: Retrieve a variable from the user's Data</strong></p> <p>Custom variables are especially useful if you need to first retrieve eg. a <code>groupId</code> from the user's data also on firestore. You can do so by waiting for the Promise to resolve after <code>openDBChannel</code> to retrieve the user's data (eg. another vuex-easy-firestore module called <code>userData</code>):</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// in this example the `userData` module will retrieve {userName: '', groupId: ''}</span>
store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'userData/openDBChannel'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>_ <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Then we can get the groupId:</span>
    <span class="token keyword">const</span> userGroupId <span class="token operator">=</span> store<span class="token punctuation">.</span>state<span class="token punctuation">.</span>userData<span class="token punctuation">.</span>groupId
    <span class="token comment">// Then we can pass it as variable to the next openDBChannel:</span>
    store<span class="token punctuation">.</span><span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'groupUserData/openDBChannel'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>groupId<span class="token punctuation">:</span> userGroupId<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><h2 id="fillables-and-guard"><a href="#fillables-and-guard" aria-hidden="true" class="header-anchor">#</a> Fillables and guard</h2> <p>You can prevent props on your docs in 'collection' mode (or on your single doc in 'doc' mode) to be synced to the firestore server. For this you should use either <code>fillables</code> <strong>or</strong> <code>guard</code>:</p> <ul><li><em>Fillables:</em> Array of keys - the props which may be synced to the server. Any other props will not be synced! All props will be synced if left blank.</li> <li><em>Guard:</em> Array of keys - the props which should not be synced to the server. (the opposite of 'fillables')</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// your other vuex-easy-fire config...</span>
  sync<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    fillables<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// array of  keys</span>
    guard<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// array of keys</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>Example fillables:</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// settings:</span>
fillables<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'name'</span><span class="token punctuation">,</span> <span class="token string">'age'</span><span class="token punctuation">]</span>

<span class="token comment">// insert new doc:</span>
<span class="token keyword">const</span> newUser <span class="token operator">=</span> <span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Ash'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">'ash@pokemon.com'</span><span class="token punctuation">}</span>
<span class="token function">dispatch</span><span class="token punctuation">(</span><span class="token string">'user/set'</span><span class="token punctuation">,</span> newUser<span class="token punctuation">)</span>

<span class="token comment">// object which will be added to Vuex `user` module:</span>
<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Ash'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span> email<span class="token punctuation">:</span> <span class="token string">'ash@pokemon.com'</span><span class="token punctuation">}</span>

<span class="token comment">// object which will be synced to firestore:</span>
<span class="token punctuation">{</span>name<span class="token punctuation">:</span> <span class="token string">'Ash'</span><span class="token punctuation">,</span> age<span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">}</span>
</code></pre></div><p><strong>Example guard:</strong></p> <p>If you have only one prop you do not want to sync to firestore you can set <code>guard</code> instead of <code>fillables</code>.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// the same example as above can also be achieved by doing:</span>
guard<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'email'</span><span class="token punctuation">]</span>
</code></pre></div><h2 id="hooks-before-insert-patch-delete"><a href="#hooks-before-insert-patch-delete" aria-hidden="true" class="header-anchor">#</a> Hooks before insert/patch/delete</h2> <p>A function where you can check something or even change the doc (the doc object) before the store mutation occurs. The <code>doc</code> passed in these hooks will also have an <code>id</code> field which is the id with which it will be added to the store and to Firestore.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// your other vuex-easy-fire config...</span>
  sync<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    insertHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> store<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    patchHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> store<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    deleteHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> id<span class="token punctuation">,</span> store<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token comment">// Batches have separate hooks!</span>
    insertBatchHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> store<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    patchBatchHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> ids<span class="token punctuation">,</span> store<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>doc<span class="token punctuation">,</span> ids<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    deleteBatchHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> ids<span class="token punctuation">,</span> store<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>ids<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">You must call `updateStore(doc)` to make the store mutation.</p> <p>But you may choose not to call this to abort the mutation. If you do not call <code>updateStore(doc)</code> nothing will happen.</p></div> <h2 id="hooks-after-changes-on-the-server"><a href="#hooks-after-changes-on-the-server" aria-hidden="true" class="header-anchor">#</a> Hooks after changes on the server</h2> <p>Exactly the same as above, but for changes that have occured on the server. You also have some extra parameters to work with:</p> <ul><li><em>id:</em> the doc id returned in <code>change.doc.id</code> (see firestore documentation for more info)</li> <li><em>doc:</em> the doc returned in <code>change.doc.data()</code> (see firestore documentation for more info)</li> <li><em>source:</em> of the change. Can be either <code>'local'</code> or <code>'server'</code></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  <span class="token comment">// your other vuex-easy-fire config...</span>
  serverChange<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    addedHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> id<span class="token punctuation">,</span> store<span class="token punctuation">,</span> source<span class="token punctuation">,</span> change<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    modifiedHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> id<span class="token punctuation">,</span> store<span class="token punctuation">,</span> source<span class="token punctuation">,</span> change<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    removedHook<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>updateStore<span class="token punctuation">,</span> doc<span class="token punctuation">,</span> id<span class="token punctuation">,</span> store<span class="token punctuation">,</span> source<span class="token punctuation">,</span> change<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token function">updateStore</span><span class="token punctuation">(</span>doc<span class="token punctuation">)</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="defaultvalues-set-after-server-retrieval"><a href="#defaultvalues-set-after-server-retrieval" aria-hidden="true" class="header-anchor">#</a> defaultValues set after server retrieval</h2> <p>If you create a <code>defaultValues</code> object, then each document from the server will receive those default values!</p> <p><strong>Use case 1: Firestore Timestamp conversion</strong><br>
Automatically convert Firestore Timestamps into <code>new Date()</code> objects! Do this by setting <code>'%convertTimestamp%'</code> as the value of a <code>defaultValues</code> prop. (see example below).</p> <p><strong>Use case 2: Reactivity</strong><br>
With VueJS, if you need a prop on an item to be fully reactive with your vue templates, it needs to exist from the start. If some docs in your user's firestore doesn't have all props (because you added new functionality to your app at later dates), the <em>retrieved docs will have reactivity problems!</em></p> <p>However, if you add these props to <code>defaultValues</code> with some value (or just <code>'null'</code>), vuex-easy-firestore will automatically add those props to the doc <em>before</em> inserting it into vuex!</p> <p><strong>Example:</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> vuexModule <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token comment">// your other vuex-easy-firestore config...</span>
  serverChange<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    defaultValues<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      defaultInt<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      propAddedLater<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span>
      date<span class="token punctuation">:</span> <span class="token string">'%convertTimestamp%'</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// Now an example of what happens to the docs which are retrieved from the server:</span>
<span class="token keyword">const</span> retrievedDoc <span class="token operator">=</span> <span class="token punctuation">{</span>
  defaultInt<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  date<span class="token punctuation">:</span> Timestamp <span class="token comment">// firestore Timestamp object</span>
<span class="token punctuation">}</span>

<span class="token comment">// This doc will be inserted into vuex like so:</span>
<span class="token keyword">const</span> docToBeInserted <span class="token operator">=</span> <span class="token punctuation">{</span>
  defaultInt<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token comment">// stays 2</span>
  propAddedLater<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">,</span> <span class="token comment">// receives propAddedLater prop with default val</span>
  date<span class="token punctuation">:</span> Timestamp<span class="token punctuation">.</span><span class="token function">toDate</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// will execute firestore's Timestamp.toDate()</span>
<span class="token punctuation">}</span>

<span class="token comment">// '%convertTimestamp%' works also with date strings:</span>
<span class="token keyword">const</span> retrievedDoc <span class="token operator">=</span> <span class="token punctuation">{</span>date<span class="token punctuation">:</span> <span class="token string">'1990-06-22 17:35:00'</span><span class="token punctuation">}</span> <span class="token comment">// date string</span>
<span class="token keyword">const</span> docToBeInserted <span class="token operator">=</span> <span class="token punctuation">{</span>date<span class="token punctuation">:</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token string">'1990-06-22 17:35:00'</span><span class="token punctuation">)</span><span class="token punctuation">}</span> <span class="token comment">// converted to new Date</span>

<span class="token comment">// in case the retrieved val is not present `null` will be added</span>
<span class="token keyword">const</span> retrievedDoc <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">const</span> docToBeInserted <span class="token operator">=</span> <span class="token punctuation">{</span>date<span class="token punctuation">:</span> <span class="token keyword">null</span><span class="token punctuation">}</span>
</code></pre></div><p>To learn more about Firestore's Timestamp format see <a href="https://firebase.google.com/docs/reference/js/firebase.firestore.Timestamp" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <h2 id="pass-firebase-dependency"><a href="#pass-firebase-dependency" aria-hidden="true" class="header-anchor">#</a> Pass Firebase dependency</h2> <p>Vuex Easy Firestore will automatically use Firebase as a peer dependency to access <code>Firebase.auth()</code> etc. If you want to pass a Firebase instance you have instantiated yourself you can do so like this:</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// make sure you import at least auth and firestore as well:</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> Firebase <span class="token keyword">from</span> <span class="token string">'firebase/app'</span>
<span class="token keyword">import</span> <span class="token string">'firebase/auth'</span>
<span class="token keyword">import</span> <span class="token string">'firebase/firestore'</span>

<span class="token keyword">import</span> createEasyFirestore <span class="token keyword">from</span> <span class="token string">'vuex-easy-firestore'</span>
<span class="token keyword">const</span> easyFirestore <span class="token operator">=</span> <span class="token function">createEasyFirestore</span><span class="token punctuation">(</span>
  userDataModule<span class="token punctuation">,</span>
  <span class="token punctuation">{</span>logging<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> FirebaseDependency<span class="token punctuation">:</span> Firebase<span class="token punctuation">}</span> <span class="token comment">// pass Firebase like this. Mind the Capital F!</span>
<span class="token punctuation">)</span>
</code></pre></div></div> <div class="page-edit"><div class="edit-link"><a href="https://github.com/mesqueeb/vuex-easy-firestore/edit/dev/docs/extra-features.md" target="_blank" rel="noopener noreferrer">Edit this page</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <!----></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/vuex-easy-firestore/guide.html" class="prev">
          Guide
        </a></span> <span class="next"><a href="/vuex-easy-firestore/config-example.html">
          Config example
        </a>
        →
      </span></p></div> </div> <!----></div></div>
    <script src="/vuex-easy-firestore/assets/js/5.2340a0ed.js" defer></script><script src="/vuex-easy-firestore/assets/js/app.4727a7aa.js" defer></script>
  </body>
</html>
